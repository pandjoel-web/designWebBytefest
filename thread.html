<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TARA – Detail Aktivitas Komunitas</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Space+Grotesk:wght@600&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Outfit", sans-serif;
        background: #ffffff;
        color: #111827;
        box-sizing: border-box;
      }

      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      .thread-container {
        background: linear-gradient(145deg, #ffffff, #f9fafb);
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .thread-container:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
      }

      .thread-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .thread-header h1 {
        font-size: 1.75rem;
        font-weight: 600;
        color: #111827;
        margin: 0;
        flex: 1;
        transition: color 0.2s ease;
      }

      .thread-header h1:hover {
        color: #2563eb;
      }

      .thread-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        font-size: 0.875rem;
        color: #6b7280;
      }

      .thread-content {
        font-size: 1rem;
        color: #4b5563;
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      .attachment-container {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-top: 1rem;
      }

      .attachment-container img {
        max-width: 120px;
        height: auto;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease;
      }

      .attachment-container img:hover {
        transform: scale(1.05);
      }

      .attachment-container a {
        color: #2563eb;
        text-decoration: none;
        font-weight: 500;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        transition: background 0.2s ease;
      }

      .attachment-container a:hover {
        background: #e6f0ff;
      }

      .thread-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        padding-top: 1.5rem;
        border-top: 1px solid #e5e7eb;
      }

      .vote-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .vote-btn {
        cursor: pointer;
        font-size: 1rem;
        transition: color 0.2s ease;
      }

      .vote-btn:hover {
        color: #2563eb;
      }

      .post-menu {
        position: relative;
      }

      .post-menu-btn {
        cursor: pointer;
        font-size: 1rem;
        color: #6b7280;
        transition: color 0.2s ease;
      }

      .post-menu-btn:hover {
        color: #2563eb;
      }

      .post-menu-content {
        position: absolute;
        top: 100%;
        right: 0;
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        min-width: 150px;
        z-index: 10;
        display: none;
      }

      .post-menu-content.open {
        display: block;
      }

      .post-menu-item {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        color: #374151;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      .post-menu-item:hover {
        background: #f9fafb;
      }

      .post-menu-item.danger {
        color: #dc2626;
      }

      .notification-bar {
        background: linear-gradient(145deg, #f3f4f6, #e5e7eb);
        border: 1px solid #d1d5db;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1.5rem;
        cursor: pointer;
      }

      @media (max-width: 768px) {
        .thread-container {
          padding: 1.5rem;
        }

        .thread-header h1 {
          font-size: 1.5rem;
        }

        .thread-footer {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.5rem;
        }
      }
    </style>
  </head>

  <body class="relative overflow-x-hidden">
    <!-- Header -->
    <header
      class="py-6 px-8 flex justify-between items-center bg-white shadow-sm border-b border-gray-200 z-40 fixed top-0 left-0 w-full"
    >
      <div
        class="text-2xl font-bold uppercase tracking-wide"
        style="font-family: 'Space Grotesk', sans-serif"
      >
        TARA<span class="text-accent">●</span>
      </div>
      <nav class="hidden md:flex space-x-6 text-sm text-gray-700">
        <a href="/" class="hover:text-black">Beranda</a>
        <a href="/eksplor" class="hover:text-black">Eksplor</a>
        <a href="/komunitas" class="hover:text-black font-semibold"
          >Komunitas</a
        >
        <a href="/proyek" class="hover:text-black">Proyek</a>
        <a href="/blog" class="hover:text-black">Blog</a>
        <a href="/agenda" class="hover:text-black">Agenda</a>
        <a href="/profil" class="hover:text-black">Profil</a>
      </nav>
      <div class="flex items-center gap-4">
        <input
          type="text"
          placeholder="Cari karya, komunitas, proyek..."
          class="px-4 py-1.5 rounded-full bg-gray-100 text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-black"
        />
        <a
          href="/login"
          class="px-4 py-2 bg-black text-white text-sm rounded-full"
          >Login</a
        >
      </div>
    </header>

    <!-- Thread Detail Section -->
    <section class="relative pt-24 pb-12 bg-white">
      <div class="max-w-7xl mx-auto px-6">
        <!-- Notification Bar -->
        <div
          id="notification-bar"
          class="notification-bar hidden"
          onclick="dismissNotification()"
        >
          <p class="text-sm text-gray-700">
            Selamat datang, Tuan! Nikmati detail aktivitas komunitas.
          </p>
        </div>

        <!-- Main Content -->
        <div class="mb-8 flex items-center gap-3">
          <a
            href="/komunitas.html"
            class="relative inline-block px-5 py-2 text-sm text-black border border-black rounded-full overflow-hidden group"
            style="font-family: 'Space Grotesk', sans-serif;"
          >
            <span class="absolute inset-0 bg-black transition-all duration-300 ease-in-out group-hover:translate-y-0 translate-y-full rounded-full"></span>
            <span class="relative z-10 group-hover:text-white transition-colors duration-300">
              ← Komunitas
            </span>
          </a>
          <a
            id="community-link"
            href=""
            class="relative inline-block px-5 py-2 text-sm text-gray-700 border border-gray-400 rounded-full overflow-hidden group"
            style="font-family: 'Space Grotesk', sans-serif;"
          >
            <span class="absolute inset-0 bg-gray-700 transition-all duration-300 ease-in-out group-hover:translate-y-0 translate-y-full rounded-full"></span>
            <span class="relative z-10 group-hover:text-white transition-colors duration-300">
              Kembali ke Komunitas
            </span>
          </a>
        </div>

        <div id="thread-detail" class="thread-container">
          <div class="thread-header">
            <h1 id="thread-title"></h1>
            <div class="post-menu">
              <i class="fas fa-ellipsis-h post-menu-btn" onclick="togglePostMenu(event, 'thread')"></i>
              <div class="post-menu-content" id="post-menu-thread">
                <div class="post-menu-item" onclick="sharePost()">Bagikan</div>
                <div class="post-menu-item" onclick="savePost()">Simpan</div>
                <div class="post-menu-item danger" onclick="reportPost()">Laporkan</div>
              </div>
            </div>
          </div>
          <div class="thread-meta">
            <span id="thread-author"></span>
            <span id="thread-time"></span>
            <span id="thread-community"></span>
          </div>
          <div class="thread-content" id="thread-content"></div>
          <div id="thread-attachments" class="attachment-container"></div>
          <div class="thread-footer">
            <div class="vote-container">
              <i class="fas fa-arrow-up vote-btn" onclick="votePost(event, 'thread', 1)"></i>
              <span id="thread-votes" class="text-sm text-gray-500">0</span>
              <i class="fas fa-arrow-down vote-btn" onclick="votePost(event, 'thread', -1)"></i>
            </div>
            <div class="flex items-center gap-4">
              <span id="thread-replies" class="text-xs text-gray-500"></span>
              <span id="thread-last-activity" class="text-xs text-gray-500"></span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 text-gray-700 text-sm">
      <div
        class="max-w-7xl mx-auto px-6 py-16 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-10"
      >
        <div class="col-span-1 sm:col-span-2">
          <div
            class="text-2xl font-bold tracking-normal uppercase"
            style="font-family: 'Space Grotesk', sans-serif"
          >
            TARA<span class="text-accent">●</span>
          </div>
          <p class="text-gray-700 mt-4">
            Rumah bagi karya visual menawan, inovasi muda, dan estetika web masa
            depan.
          </p>
          <div class="flex gap-4 mt-4 text-gray-700 text-lg">
            <a href="#" class="hover:text-black" aria-label="Instagram"
              ><i class="fab fa-instagram"></i
            ></a>
            <a href="#" class="hover:text-black" aria-label="Twitter"
              ><i class="fab fa-twitter"></i
            ></a>
            <a href="#" class="hover:text-black" aria-label="LinkedIn"
              ><i class="fab fa-linkedin"></i
            ></a>
            <a href="#" class="hover:text-black" aria-label="Dribbble"
              ><i class="fab fa-dribbble"></i
            ></a>
            <a href="#" class="hover:text-black" aria-label="Behance"
              ><i class="fab fa-behance"></i
            ></a>
          </div>
        </div>
        <div>
          <h3 class="font-semibold text-black mb-4 uppercase">Navigasi</h3>
          <ul class="space-y-2">
            <li><a href="/" class="hover:text-black">Beranda</a></li>
            <li>
              <a href="/eksplor" class="hover:text-black">Eksplor Karya</a>
            </li>
            <li><a href="/komunitas" class="hover:text-black">Komunitas</a></li>
            <li>
              <a href="/proyek" class="hover:text-black">Proyek Sosial</a>
            </li>
            <li><a href="/blog" class="hover:text-black">Blog</a></li>
            <li><a href="/agenda" class="hover:text-black">Agenda</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-black mb-4 uppercase">Eksplorasi</h3>
          <ul class="space-y-2">
            <li>
              <a href="/eksplor?kategori=puisi" class="hover:text-black"
                >Puisi</a
              >
            </li>
            <li>
              <a href="/eksplor?kategori=desain" class="hover:text-black"
                >Desain</a
              >
            </li>
            <li>
              <a href="/eksplor?kategori=musik" class="hover:text-black"
                >Musik</a
              >
            </li>
            <li>
              <a href="/eksplor?kategori=coding" class="hover:text-black"
                >Coding</a
              >
            </li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-black mb-4 uppercase">Kolaborasi</h3>
          <ul class="space-y-2">
            <li>
              <a href="/proyek/submit" class="hover:text-black">Submit Karya</a>
            </li>
            <li>
              <a href="/komunitas/gabung" class="hover:text-black"
                >Gabung Komunitas</a
              >
            </li>
            <li>
              <a href="/proyek/buat" class="hover:text-black">Buat Proyek</a>
            </li>
            <li><a href="/kontak" class="hover:text-black">Kontak</a></li>
          </ul>
        </div>
        <div>
          <h3 class="font-semibold text-black mb-4 uppercase">Newsletter</h3>
          <p class="text-gray-700 mb-3">
            Dapatkan inspirasi mingguan di kotak masuk Tuan.
          </p>
          <div class="flex items-center gap-2">
            <input
              type="email"
              placeholder="Email Tuan..."
              class="w-full px-3 py-2 border border-gray-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-black"
            />
            <button class="px-4 py-2 bg-black text-white text-sm rounded-md">
              Kirim
            </button>
          </div>
        </div>
      </div>
      <div
        class="border-t border-gray-200 text-center py-4 text-xs text-gray-700"
      >
        © 2025 TARA. Dirakit dengan semangat di bumi Nusantara.
        <a href="/tentang" class="hover:text-black">Tentang Kami</a> |
        <a href="/ketentuan" class="hover:text-black">Ketentuan Layanan</a> |
        <a href="/privasi" class="hover:text-black">Privasi</a> |
        <a href="/bantuan" class="hover:text-black">Bantuan</a>
      </div>
    </footer>

    <script>
      // Simulated Community Posts Data
      const communityPosts = [
        {
          id: 1,
          communityId: 1,
          title: "Puisi Senja",
          content:
            "Sebuah puisi tentang keindahan senja di ufuk barat, menggambarkan perasaan damai dan nostalgia.",
          time: "2 jam lalu",
          votes: 42,
          pinned: true,
          attachments: [
            { type: "image", url: "https://picsum.photos/100/100?poetry" },
          ],
          replies: 15,
          lastActivity: new Date().toISOString(),
          author: "Rudi Santoso",
        },
        {
          id: 999,
          communityId: 999,
          title: "Selamat Datang!",
          content:
            "Selamat datang di komunitas ini! Mulai diskusi Anda di sini.",
          time: "Baru saja",
          votes: 0,
          pinned: false,
          attachments: [],
          replies: 0,
          lastActivity: new Date().toISOString(),
          author: "Admin Tara",
        },
      ];

      // Simulated Community Data
      const communities = [
        {
          id: 1,
          name: "Komunitas Puisi",
          category: "Puisi",
          description:
            "Berbagi kata, menenun makna dalam puisi. Bergabunglah untuk mengeksplorasi keindahan bahasa dan emosi.",
          members: 1200,
          image: "https://picsum.photos/600/400?poetry",
          badge: "populer",
          joined: true,
          createdDate: "Januari 2023",
          creator: "Rudi Santoso",
          onlineMembers: 50,
        },
        {
          id: 999,
          name: "Komunitas Umum",
          category: "Umum",
          description:
            "Tempat untuk berbagai diskusi kreatif dan kolaborasi lintas kategori.",
          members: 100,
          image: "https://picsum.photos/600/400?general",
          badge: null,
          joined: false,
          createdDate: "Oktober 2024",
          creator: "Admin Tara",
          onlineMembers: 10,
        },
      ];

      // Get Thread and Community ID from URL
      function getThreadParams() {
        const params = new URLSearchParams(window.location.search);
        const threadId = parseInt(params.get("thread")) || 999;
        const communityId = parseInt(params.get("community")) || 999;
        return { threadId, communityId };
      }

      // Render Thread Details
      function renderThreadDetails() {
        const { threadId, communityId } = getThreadParams();
        const thread =
          communityPosts.find((p) => p.id === threadId) ||
          communityPosts.find((p) => p.id === 999);
        const community =
          communities.find((c) => c.id === communityId) ||
          communities.find((c) => c.id === 999);

        document.getElementById("thread-title").textContent = thread.title;
        document.getElementById("thread-author").textContent = `Diposting oleh ${thread.author}`;
        document.getElementById("thread-time").textContent = thread.time;
        document.getElementById(
          "thread-community"
        ).innerHTML = `<a href="/forum.html?community=${community.id}" class="text-blue-600 hover:underline">${community.name}</a>`;
        document.getElementById("thread-content").textContent = thread.content;
        document.getElementById("thread-votes").textContent = thread.votes;
        document.getElementById(
          "thread-replies"
        ).innerHTML = `<i class="fas fa-comment mr-1"></i>${thread.replies} Balasan`;
        document.getElementById(
          "thread-last-activity"
        ).textContent = `Aktivitas Terakhir: ${thread.time}`;
        document.getElementById(
          "community-link"
        ).href = `/forum.html?community=${community.id}`;

        const attachmentsContainer = document.getElementById("thread-attachments");
        attachmentsContainer.innerHTML = thread.attachments
          .map((att) =>
            att.type === "image"
              ? `<img src="${att.url}" alt="Lampiran" />`
              : `<a href="${att.url}" target="_blank">${att.text}</a>`
          )
          .join("");

        if (thread.pinned) {
          document.getElementById("thread-title").innerHTML += `
            <i class="fas fa-thumbtack text-yellow-400 ml-2" title="Postingan Disematkan"></i>
          `;
        }

        gsap.from(".thread-container", {
          opacity: 0,
          y: 20,
          duration: 0.5,
          ease: "power3.out",
        });
      }

      // Toggle Post Menu
      function togglePostMenu(event, id) {
        event.preventDefault();
        const menu = document.getElementById(`post-menu-${id}`);
        const isOpen = menu.classList.contains("open");
        document
          .querySelectorAll(".post-menu-content.open")
          .forEach((m) => m.classList.remove("open"));
        if (!isOpen) {
          menu.classList.add("open");
          gsap.from(menu, {
            opacity: 0,
            y: -10,
            duration: 0.2,
            ease: "power2.out",
          });
        }
      }

      // Share Post
      function sharePost() {
        const { threadId, communityId } = getThreadParams();
        const url = `/forum.html?community=${communityId}&thread=${threadId}`;
        navigator.clipboard.writeText(window.location.origin + url);
        const notificationBar = document.getElementById("notification-bar");
        notificationBar.querySelector("p").textContent = "Link aktivitas telah disalin, Tuan!";
        notificationBar.classList.remove("hidden");
        gsap.from(notificationBar, {
          opacity: 0,
          y: -20,
          duration: 0.5,
          ease: "power2.out",
        });
      }

      // Save Post
      function savePost() {
        const { threadId } = getThreadParams();
        const notificationBar = document.getElementById("notification-bar");
        notificationBar.querySelector("p").textContent = `Aktivitas ${threadId} telah disimpan, Tuan!`;
        notificationBar.classList.remove("hidden");
        gsap.from(notificationBar, {
          opacity: 0,
          y: -20,
          duration: 0.5,
          ease: "power2.out",
        });
      }

      // Report Post
      function reportPost() {
        const { threadId } = getThreadParams();
        const notificationBar = document.getElementById("notification-bar");
        notificationBar.querySelector("p").textContent = `Aktivitas ${threadId} telah dilaporkan, Tuan.`;
        notificationBar.classList.remove("hidden");
        gsap.from(notificationBar, {
          opacity: 0,
          y: -20,
          duration: 0.5,
          ease: "power2.out",
        });
      }

      // Vote Post
      function votePost(event, id, value) {
        event.preventDefault();
        const { threadId } = getThreadParams();
        const post = communityPosts.find((p) => p.id === threadId);
        post.votes += value;
        post.lastActivity = new Date().toISOString();
        renderThreadDetails();
        const notificationBar = document.getElementById("notification-bar");
        notificationBar.querySelector("p").textContent = `Suara Tuan telah diberikan!`;
        notificationBar.classList.remove("hidden");
        gsap.from(notificationBar, {
          opacity: 0,
          y: -20,
          duration: 0.5,
          ease: "power2.out",
        });
      }

      // Dismiss Notification Bar
      function dismissNotification() {
        const notificationBar = document.getElementById("notification-bar");
        gsap.to(notificationBar, {
          opacity: 0,
          y: -20,
          duration: 0.5,
          ease: "power2.in",
          onComplete: () => {
            notificationBar.classList.add("hidden");
            notificationBar.querySelector("p").textContent =
              "Selamat datang, Tuan! Nikmati detail aktivitas komunitas.";
          },
        });
      }

      // Close Post Menus on Click Outside
      document.addEventListener("click", (event) => {
        if (!event.target.closest(".post-menu")) {
          document
            .querySelectorAll(".post-menu-content.open")
            .forEach((m) => m.classList.remove("open"));
        }
      });

      // Initialize
      document.getElementById("notification-bar").classList.remove("hidden");
      renderThreadDetails();
    </script>
  </body>
</html>