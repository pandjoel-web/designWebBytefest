<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TARA – Notifikasi</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Space+Grotesk:wght@600&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Outfit', sans-serif;
            background: #ffffff;
            color: #111827;
            box-sizing: border-box;
        }

        *,
        *::before,
        *::after {
            box-sizing: inherit;
        }

        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.4;
        }

        .notification-card {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .notification-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .notification-card.unread {
            background: #f3f4f6;
        }

        .notification-card p {
            font-size: 0.9rem;
            color: #4b5563;
        }

        .notification-card .time {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid #e5e7eb;
            background: #f3f4f6;
            color: #374151;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .filter-btn.active {
            background: #111827;
            color: #ffffff;
            border-color: #facc15;
        }

        .filter-btn:hover {
            background: #e5e7eb;
            color: #1f2937;
        }

        .sidebar {
            background: #ffffff;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
        }

        .sidebar a {
            display: block;
            padding: 0.5rem 0;
            color: #374151;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .sidebar a:hover {
            color: #111827;
        }

        .notification-icon {
            transition: transform 0.3s ease, color 0.3s ease;
            position: relative;
        }

        .notification-icon:hover {
            transform: scale(1.2);
            color: #111827;
        }

        .notification-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #facc15;
            color: #111827;
            font-size: 0.75rem;
            font-weight: 500;
            border-radius: 9999px;
            padding: 0.1rem 0.5rem;
        }
    </style>
</head>

<body class="relative overflow-x-hidden">
    <div id="particles-js"></div>

    <!-- Header -->
    <header class="py-6 px-8 flex justify-between items-center bg-white shadow-sm border-b border-gray-200 z-40 fixed top-0 left-0 w-full">
        <div class="text-2xl font-bold uppercase tracking-wide" style="font-family: 'Space Grotesk', sans-serif;">
            TARA<span class="text-accent">●</span>
        </div>
        <nav class="hidden md:flex space-x-6 text-sm text-gray-700">
            <a href="/" class="hover:text-black transition">Beranda</a>
            <a href="/eksplor" class="hover:text-black transition">Eksplor</a>
            <a href="/komunitas" class="hover:text-black transition font-semibold">Komunitas</a>
            <a href="/proyek" class="hover:text-black transition">Proyek</a>
            <a href="/blog" class="hover:text-black transition">Blog</a>
            <a href="/agenda" class="hover:text-black transition">Agenda</a>
            <a href="/profil" class="hover:text-black transition">Profil</a>
        </nav>
        <div class="flex items-center gap-4">
            <input type="text" placeholder="Cari karya, komunitas, proyek..."
                class="px-4 py-1.5 rounded-full bg-gray-100 text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-black transition" />
            <a href="/login" class="px-4 py-2 bg-black text-white text-sm rounded-full hover:bg-gray-800 transition">Login</a>
        </div>
    </header>

    <!-- Notifications Section -->
    <section class="relative pt-24 pb-12 bg-white">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-12">
                <h1 class="text-5xl font-bold text-black mb-4" style="font-family: 'Space Grotesk', sans-serif;">Notifikasi</h1>
                <p class="text-lg text-gray-600">Lihat semua pembaruan dari komunitas yang Tuan ikuti.</p>
            </div>

            <div class="flex flex-col md:flex-row gap-6">
                <!-- Main Content -->
                <div class="flex-1">
                    <!-- Filters and Actions -->
                    <div class="flex flex-col sm:flex-row sm:items-center gap-3 mb-8">
                        <div class="flex gap-2">
                            <button class="filter-btn active" data-filter="all">Semua</button>
                            <button class="filter-btn" data-filter="unread">Belum Dibaca</button>
                        </div>
                        <button id="mark-all-read" class="sm:ml-auto px-4 py-2 bg-black text-white text-sm rounded-full hover:bg-gray-800 transition">Tandai Semua Dibaca</button>
                    </div>

                    <!-- Notification List -->
                    <div id="notification-list" class="space-y-4"></div>
                </div>

                <!-- Sidebar -->
                <aside class="sidebar md:w-80">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-black">Navigasi Komunitas</h3>
                        <div class="relative">
                            <i class="fas fa-bell text-gray-500 cursor-pointer notification-icon" onclick="window.location.href='/notifikasi'"></i>
                            <span class="notification-badge" id="unread-count">3</span>
                        </div>
                    </div>
                    <a href="/komunitas/buat" class="flex items-center gap-2"><i class="fas fa-plus"></i> Buat Komunitas</a>
                    <a href="/komunitas/saya" class="flex items-center gap-2"><i class="fas fa-user-friends"></i> Komunitas Saya</a>
                    <a href="/forum" class="flex items-center gap-2"><i class="fas fa-comments"></i> Forum Diskusi</a>
                    <a href="/komunitas/populer" class="flex items-center gap-2"><i class="fas fa-fire"></i> Komunitas Populer</a>
                    <hr class="my-4 border-gray-200" />
                    <h3 class="text-lg font-semibold text-black mb-4">Komunitas Saya</h3>
                    <div id="joined-communities" class="space-y-2"></div>
                </aside>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200 text-gray-700 text-sm">
        <div class="max-w-7xl mx-auto px-6 py-16 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-10">
            <div class="col-span-1 sm:col-span-2">
                <div class="text-2xl font-bold tracking-normal uppercase" style="font-family: 'Space Grotesk', sans-serif;">
                    TARA<span class="text-accent">●</span>
                </div>
                <p class="text-gray-700 mt-4">Rumah bagi karya visual menawan, inovasi muda, dan estetika web masa depan.</p>
                <div class="flex gap-4 mt-4 text-gray-700 text-lg">
                    <a href="#" class="hover:text-black transition" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="hover:text-black transition" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="hover:text-black transition" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    <a href="#" class="hover:text-black transition" aria-label="Dribbble"><i class="fab fa-dribbble"></i></a>
                    <a href="#" class="hover:text-black transition" aria-label="Behance"><i class="fab fa-behance"></i></a>
                </div>
            </div>
            <div>
                <h3 class="font-semibold text-black mb-4 uppercase">Navigasi</h3>
                <ul class="space-y-2">
                    <li><a href="/" class="hover:text-black transition">Beranda</a></li>
                    <li><a href="/eksplor" class="hover:text-black transition">Eksplor Karya</a></li>
                    <li><a href="/komunitas" class="hover:text-black transition">Komunitas</a></li>
                    <li><a href="/proyek" class="hover:text-black transition">Proyek Sosial</a></li>
                    <li><a href="/blog" class="hover:text-black transition">Blog</a></li>
                    <li><a href="/agenda" class="hover:text-black transition">Agenda</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-black mb-4 uppercase">Eksplorasi</h3>
                <ul class="space-y-2">
                    <li><a href="/eksplor?kategori=puisi" class="hover:text-black transition">Puisi</a></li>
                    <li><a href="/eksplor?kategori=desain" class="hover:text-black transition">Desain</a></li>
                    <li><a href="/eksplor?kategori=musik" class="hover:text-black transition">Musik</a></li>
                    <li><a href="/eksplor?kategori=coding" class="hover:text-black transition">Coding</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-black mb-4 uppercase">Kolaborasi</h3>
                <ul class="space-y-2">
                    <li><a href="/proyek/submit" class="hover:text-black transition">Submit Karya</a></li>
                    <li><a href="/komunitas/gabung" class="hover:text-black transition">Gabung Komunitas</a></li>
                    <li><a href="/proyek/buat" class="hover:text-black transition">Buat Proyek</a></li>
                    <li><a href="/kontak" class="hover:text-black transition">Kontak</a></li>
                </ul>
            </div>
            <div>
                <h3 class="font-semibold text-black mb-4 uppercase">Newsletter</h3>
                <p class="text-gray-700 mb-3">Dapatkan inspirasi mingguan di kotak masuk Tuan.</p>
                <div class="flex items-center gap-2">
                    <input type="email" placeholder="Email Tuan..." class="w-full px-3 py-2 border border-gray-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-black" />
                    <button class="px-4 py-2 bg-black text-white text-sm rounded-md hover:bg-gray-800 transition">Kirim</button>
                </div>
            </div>
        </div>
        <div class="border-t border-gray-200 text-center py-4 text-xs text-gray-700">
            © 2025 TARA. Dirakit dengan semangat di bumi Nusantara.
            <a href="/tentang" class="hover:text-black transition">Tentang Kami</a> |
            <a href="/ketentuan" class="hover:text-black transition">Ketentuan Layanan</a> |
            <a href="/privasi" class="hover:text-black transition">Privasi</a> |
            <a href="/bantuan" class="hover:text-black transition">Bantuan</a>
        </div>
    </footer>

    <script>
        // Simulated Notification Data
        const notifications = [
            { id: 1, text: "New post in Komunitas Puisi: 'Puisi Senja'", time: "2 jam lalu", communityId: 1, read: false },
            { id: 2, text: "Event baru di Komunitas Desain: 'Workshop UI'", time: "4 jam lalu", communityId: 2, read: false },
            { id: 3, text: "Diskusi baru di Komunitas Puisi: 'Sastra Modern'", time: "6 jam lalu", communityId: 1, read: false },
            { id: 4, text: "New post in Komunitas Desain: 'Tips Desain Minimalis'", time: "1 hari lalu", communityId: 2, read: true },
        ];

        // Simulated Joined Communities Data (from komunitas.html)
        const communities = [
            { id: 1, name: "Komunitas Puisi", category: "puisi", joined: true },
            { id: 2, name: "Komunitas Desain", category: "desain", joined: true },
            { id: 3, name: "Komunitas Musik", category: "musik", joined: false },
            { id: 4, name: "Komunitas Coding", category: "coding", joined: false },
            { id: 5, name: "Penulis Kreatif", category: "puisi", joined: false },
            { id: 6, name: "Desain UI/UX", category: "desain", joined: false },
        ];

        // Render Notifications
        function renderNotifications(filter = 'all') {
            const notificationList = document.getElementById('notification-list');
            notificationList.innerHTML = '';

            let filteredNotifications = filter === 'all' ? notifications : notifications.filter(n => !n.read);

            if (filteredNotifications.length === 0) {
                notificationList.innerHTML = `
                    <div class="text-center text-gray-600">
                        <p class="text-lg">Tidak ada notifikasi ${filter === 'all' ? '' : 'belum dibaca'}.</p>
                    </div>
                `;
                return;
            }

            filteredNotifications.forEach(notification => {
                notificationList.innerHTML += `
                    <div class="notification-card ${notification.read ? '' : 'unread'}" onclick="viewNotification(${notification.id})">
                        <p>${notification.text}</p>
                        <p class="time">${notification.time}</p>
                        ${!notification.read ? '<span class="text-red-500 absolute top-2 right-2 text-xl">!</span>' : ''}
                    </div>
                `;
            });

            // Update unread count
            const unreadCount = notifications.filter(n => !n.read).length;
            document.getElementById('unread-count').textContent = unreadCount;

            // Animate Notification Cards
            gsap.from(".notification-card", {
                opacity: 0,
                y: 20,
                duration: 0.8,
                stagger: 0.1,
                ease: "power3.out"
            });
        }


        // Render Joined Communities in Sidebar
        function renderJoinedCommunities() {
            const joinedCommunities = document.getElementById('joined-communities');
            const joined = communities.filter(c => c.joined);
            joinedCommunities.innerHTML = joined.length === 0 ? 
                '<p class="text-sm text-gray-500">Belum bergabung dengan komunitas.</p>' :
                joined.map(c => `
                    <a href="/forum?community=${c.id}" class="flex items-center gap-2 text-sm">
                        <i class="fas fa-circle text-xs text-accent"></i> ${c.name}
                    </a>
                `).join('');

            // Animate Joined Communities
            anime({
                targets: '#joined-communities a',
                translateY: [20, 0],
                opacity: [0, 1],
                duration: 600,
                delay: anime.stagger(100),
                easing: 'easeOutQuad'
            });
        }

        // Mark All Notifications as Read
        function markAllAsRead() {
            notifications.forEach(n => n.read = true);
            renderNotifications(document.querySelector('.filter-btn.active')?.dataset.filter || 'all');
            anime({
                targets: '#mark-all-read',
                scale: [1, 1.1, 1],
                backgroundColor: ['#111827', '#374151', '#111827'],
                color: ['#ffffff', '#facc15', '#ffffff'],
                duration: 300,
                easing: 'easeOutQuad'
            });
        }

        // View Notification (Placeholder)
        function viewNotification(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            notification.read = true;
            renderNotifications(document.querySelector('.filter-btn.active')?.dataset.filter || 'all');
            alert(`Viewing notification ${notificationId} (placeholder).`);
            // Future implementation: Navigate to specific post or event
        }

        // Initialize
        renderNotifications();
        renderJoinedCommunities();

        // Filter Functionality
        const filterButtons = document.querySelectorAll('.filter-btn');
        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterButtons.forEach(f => f.classList.remove('active'));
                btn.classList.add('active');
                renderNotifications(btn.dataset.filter);
                anime({
                    targets: btn,
                    scale: [1, 1.1, 1],
                    backgroundColor: ['#f3f4f6', '#111827'],
                    color: ['#374151', '#ffffff'],
                    duration: 300,
                    easing: 'easeOutQuad'
                });
            });
        });

        // Mark All as Read Button
        document.getElementById('mark-all-read').addEventListener('click', markAllAsRead);

        // GSAP Animations
        gsap.registerPlugin(ScrollTrigger);
        gsap.from("h1, p", {
            opacity: 0,
            y: 20,
            duration: 1,
            stagger: 0.2,
            ease: "power3.out",
            delay: 0.2
        });

        gsap.from(".sidebar", {
            opacity: 0,
            x: 50,
            duration: 1,
            ease: "power3.out",
            scrollTrigger: {
                trigger: ".sidebar",
                start: "top 80%"
            }
        });

        // Particles.js Initialization
        window.addEventListener('load', () => {
            particlesJS("particles-js", {
                particles: {
                    number: { value: 50, density: { enable: true, value_area: 1000 } },
                    color: { value: "#4b5563" },
                    shape: { type: "circle" },
                    opacity: { value: 0.4, random: true },
                    size: { value: 2, random: true },
                    line_linked: { enable: false },
                    move: {
                        enable: true,
                        speed: 0.5,
                        direction: "top",
                        random: false,
                        straight: false,
                        out_mode: "out"
                    }
                },
                interactivity: {
                    events: {
                        onhover: { enable: true, mode: "repulse" },
                        onclick: { enable: false }
                    },
                    modes: {
                        repulse: { distance: 100, duration: 0.4 }
                    }
                },
                retina_detect: true
            });
        });
    </script>
</body>
</html>